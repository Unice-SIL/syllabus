{{ form_start(form, {'attr': {'class': 'form-focus'}}) }}
{{ form_errors(form) }}
<div class="row mt-3">
    <div class="col-6">
        {{ form_row(form.domains, {label_attr: {class: 'required'}}) }}
        <label class="required font-weight-bold">
            {{ 'app.presentation.form.general.level_label' | trans }}
            <div class="help d-inline-block">
                <i class="fas fa-question-circle help-button"></i>
                <span class="help-message">
                    <ul>
                        {{ 'app.presentation.form.general.level.beginner' | trans | raw }}
                        {{ 'app.presentation.form.general.level.intermediary' | trans | raw }}
                        {{ 'app.presentation.form.general.level.advanced' | trans | raw }}
                    </ul>
                </span>
            </div>
        </label>
        {{ form_errors(form.level) }}
        {{ form_widget(form.level, {label_attr: {class: 'radio-custom'} }) }}
        <div class="mt-3">
            {{ form_row(form.campuses) }}
        </div>
    </div>
    <div class="col-6">
        {{ form_row(form.periods) }}
        {{ form_row(form.languages) }}
    </div>
</div>

<div class="row mt-4">
    <div class="col-6">
        <div>
            {{ form_widget(form.mediaType, {label_attr: {class: 'radio-custom'}} ) }}
        </div>

        <div class="border p-2">
            <div id="image">
                {{ form_errors(form.image) }}
                <small class="font-weight-bold">{{ 'app.presentation.form.general.file_type' | trans }}</small>
                {{ form_widget(form.image, {label_attr: {class: 'file-custom'} }) }}
                {% if form.vars.data.image is not null %}
                    {% if courseInfo.image == form.vars.data.image %}
                        {% set imgSrc = form.vars.data.image.filename %}
                    {% else %}
                        {% set imgSrc = courseInfo.image %}
                    {% endif %}
                    <img class="img-thumbnail" id="media_image" src="{{ asset('data/' ~ imgSrc) }}">
                {% endif %}
            </div>

            <div id="video">
                <button class="btn btn-light" type="button" data-toggle="collapse" data-target="#collapseExample"
                        aria-expanded="false" aria-controls="collapseExample">
                    {{ 'app.presentation.form.general.add_video' | trans }}
                </button>
                <div class="alert alert-light collapse" role="alert" id="collapseExample">
                    <span>{{ 'app.presentation.form.general.add_video_info.part1' | trans }}<br/>
                        {{ 'app.presentation.form.general.add_video_info.part2' | trans }}<br/>
                        {{ 'app.presentation.form.general.add_video_info.part3' | trans }}</span>
                    <pre class="mb-0">&lt;iframe ... &gt;&lt;/iframe&gt;</pre>
                    <span>{{ 'app.presentation.form.general.add_video_info.part4' | trans }}</span>
                </div>
                {{ form_widget(form.video) }}
            </div>
        </div>
    </div>
    <div class="col-6">
        <label class="required font-weight-bold">
            {{ 'app.presentation.form.general.summary' | trans }}
        </label>
        {{ form_errors(form.summary) }}
        {{ form_widget(form.summary) }}
    </div>
</div>
<div class="mt-2">
    <button type="submit" class="submit-button btn btn-primary submit rounded"
            data-url="{{ path('app.course_info.presentation.general', {'id': courseInfo.id}) }}">
        {{ 'app.general.button.save' | trans }}
    </button>
    <button type="button" class="cancel-button btn btn-secondary rounded"
            data-url="{{ path('app.course_info.presentation.general', {'id': courseInfo.id}) }}">
        {{ 'app.general.button.cancel' | trans }}
    </button>
</div>
{{ form_widget(form._token) }}
{{ form_end(form) }}

<script>

    $(document).ready(function () {

        function toggleMediaType() {
            let value = $('#general_mediaType').find('input[type="radio"]:checked').val();
            if (value === 'video')
            {
                $('#image').hide();
                $('#video').show();
            }
            else
            {
                $('#image').show();
                $('#video').hide();
            }
        }

        $(document).on('change', '#general_mediaType', function () {
            toggleMediaType();
        });

        $('#infos_level').click(function () {
            var message = '<ul>' +
                '{{ 'app.presentation.form.general.level.beginner' | trans }}' +
                '{{ 'app.presentation.form.general.level.intermediary' | trans }}' +
                '{{ 'app.presentation.form.general.level.advanced' | trans }}' +
                '</ul>';
            bootbox.dialog({
                message: message,
                backdrop: true,
                onEscape: true
            });
        });

        $('form[name="general"]').find('.select2entity').select2entity();

        toggleMediaType();
    });


</script>